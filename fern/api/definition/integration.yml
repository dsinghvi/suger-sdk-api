imports:
  commons: commons.yml

services:
  http:
    IntegrationService:
      auth: true
      base-path: /org/{orgId}/integration
      path-parameters:
        orgId:
          docs: Organization ID
          type: string
      endpoints:
        getAllForOrg:
          path: ""
          method: GET
          display-name: List all integrations under the organization
          response: list<commons.IdentityIntegration>
        
        create:
          path: ""
          method: POST
          docs: >-
            For each organization, partner & service, there should be at most
            one integration.
          display-name: Create an integration.
          request:
            body: CreateIntegrationParams
          response: commons.IdentityIntegration
        
        get:
          path: /{partner}/{service}
          method: GET
          display-name: Get the integration for the given organization, partner & service.
          path-parameters:
            partner:
              docs: Cloud Partner
              type: string
            service:
              docs: Partner Service
              type: string
          response: commons.IdentityIntegration
        
        delete:
          path: /{partner}/{service}
          method: DELETE
          display-name: Delete the integration.
          path-parameters:
            partner:
              docs: Cloud Partner
              type: string
            service:
              docs: Partner Service
              type: string
          response: string
        
        update:
          path: /{partner}/{service}
          method: PATCH
          display-name: Update the integration.
          path-parameters:
            partner:
              docs: Cloud Partner
              type: string
            service:
              docs: Partner Service
              type: string
          request:
            body: UpdateIntegrationParams
          response: commons.IdentityIntegration
        
        verify:
          path: /{partner}/{service}/verify
          method: POST
          display-name: Verify the integration, check whether it works correctly.
          path-parameters:
            partner:
              docs: Cloud Partner
              type: string
            service:
              docs: Partner Service
              type: string
          response: boolean

types:
  CreateIntegrationParams:
    properties:
      info: commons.IntegrationInfo
      organizationID: string
      partner: string
      service: string
      
  UpdateIntegrationParams:
    properties:
      info: commons.IntegrationInfo
      organizationID: string
      partner: string
      service: string
